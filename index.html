<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <title>Stobix 24h Gainers/Losers</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>
    *{box-sizing:border-box}body{margin:0;font-family:system-ui;background:#05060a;color:#e5e7eb;min-height:100vh;padding:20px}h1{margin:0;font-size:22px}.container{max-width:1200px;margin:auto}.status{font-size:11px;color:#9ca3af;margin:10px 0}.controls{display:flex;gap:10px;flex-wrap:wrap;margin:15px 0}.ctrl{display:flex;flex-direction:column;gap:4px}label{font-size:10px;text-transform:uppercase;color:#9ca3af}input,.btn{background:#0b0d14;border:1px solid #1f2933;color:#e5e7eb;padding:6px 10px;border-radius:4px;font-size:12px}button{cursor:pointer;background:#1d4ed8}table{width:100%;font-size:12px;margin-top:10px;border-collapse:collapse}th{background:#0f172a;padding:8px;text-align:left;border-bottom:1px solid #1f2933;color:#9ca3af;font-weight:500}td{padding:8px;border-bottom:1px solid #1f2933}tbody tr:hover{background:#1f2933}.green{color:#22c55e}.red{color:#ef4444}.main{display:grid;grid-template-columns:1.4fr 1fr;gap:15px;margin-top:20px}.panel{background:#0b0d14;border:1px solid #1f2933;border-radius:8px;padding:12px}.panel-title{font-size:13px;font-weight:600;text-transform:uppercase;margin-bottom:10px}.summary{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}.summary-item{flex:1;min-width:110px;background:#05060a;border:1px solid #1f2933;padding:8px;border-radius:6px;font-size:10px}.summary-label{text-transform:uppercase;color:#9ca3af;margin-bottom:4px}.summary-value{font-size:13px;font-weight:500}@media(max-width:900px){.main{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <h1>Stobix Futures 24h Scanner</h1>
    <div class="status"><span class="green">●</span> <span id="status">Загрузка...</span></div>
    <div class="controls">
      <div class="ctrl"><label>Топ N</label><input id="top" type="number" min="1" max="100" value="10"/></div>
      <div class="ctrl"><label>Мин. объём (M USDT)</label><input id="minvol" type="number" min="0" value="1"/></div>
      <button class="btn" onclick="location.reload()">Обновить</button>
    </div>

    <div class="main">
      <div class="panel">
        <div class="panel-title">Лидеры (Gainers)</div>
        <table><thead><tr><th>Пара</th><th>Цена</th><th>% 24h</th><th>Объём</th></tr></thead><tbody id="gainers"></tbody></table>
      </div>
      <div class="panel">
        <div class="panel-title">Лузеры (Losers)</div>
        <table><thead><tr><th>Пара</th><th>Цена</th><th>% 24h</th><th>Объём</th></tr></thead><tbody id="losers"></tbody></table>
        <div class="summary">
          <div class="summary-item"><div class="summary-label">Всего</div><div class="summary-value" id="total">0</div></div>
          <div class="summary-item"><div class="summary-label">Макс.+</div><div class="summary-value green" id="maxgain">0%</div></div>
          <div class="summary-item"><div class="summary-label">Макс.-</div><div class="summary-value red" id="maxloss">0%</div></div>
          <div class="summary-item"><div class="summary-label">Средн.</div><div class="summary-value" id="avg">0%</div></div>
        </div>
      </div>
    </div>
  </div>

  <script>
  const PAIRS=["RENDER","STX","FET","WIF","CORE","BONK","PNUT","PEPE","PENGU","S","GALA","LPT","SHIB","IOTA","ALGO","HYPE","LINEA","XPL","STRK","RAY","TIA","GRT","HBAR","LISTA","XRP","TWT","PYTH","FLOKI","IP","POL","INJ","ASTER","ICP","ATOM","FORM","JUP","CAKE","TAO","XLM","ENA","NEAR","AVAX","LINK","ARB","APE","LDO","DOGE","ONDO","WLD","SOL","BNB","ENS","TRUMP","BTC","MNT","SNX","SAND","DASH","ADA","FIL","OP","ETH","APT","SOMI","LTC","PUMP","ETHFI","SUI","FF","EUL","AVNT","SEI","KAITO","WLFI","TON","MASK","TURBO","AAVE","EDEN","0G","IMX","PENDLE","TRX","ENSO","ZEC","BCH","UNI","CRV","DOT","ZEN"];
  let data=[];

  async function load(){
    try{
      const r=await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr');
      const m=await r.json();
      data=m.filter(x=>x.symbol.endsWith('USDT')&&PAIRS.includes(x.symbol.replace('USDT',''))).map(x=({
        s:x.symbol,p:parseFloat(x.lastPrice),v:parseFloat(x.quoteVolume),c:parseFloat(x.priceChangePercent)
      }));
      document.getElementById('status').textContent=`Обновлено: ${new Date().toLocaleTimeString()}`;
      render();
    }catch(e){
      document.getElementById('status').textContent='Ошибка: '+e.message;
    }
  }

  function render(){
    const top=Math.max(1,Math.min(100,parseInt(document.getElementById('top').value)));
    const minvol=(parseInt(document.getElementById('minvol').value)||0)*1e6;
    let f=data.filter(x=>x.v>=minvol);
    document.getElementById('total').textContent=f.length;
    if(!f.length){document.getElementById('gainers').innerHTML='<tr><td colspan=4>-</td></tr>';document.getElementById('losers').innerHTML='<tr><td colspan=4>-</td></tr>';return;}
    const g=f.sort((a,b)=>b.c-a.c).slice(0,top);
    const l=f.sort((a,b)=>a.c-b.c).slice(0,top);
    const fmt=(p)=>p>=1?p.toFixed(4):p>=0.01?p.toFixed(6):p.toFixed(8);
    const fv=(v)=>v>=1e9?(v/1e9).toFixed(1)+'B':v>=1e6?(v/1e6).toFixed(1)+'M':(v/1e3).toFixed(0)+'K';
    document.getElementById('gainers').innerHTML=g.map(x=>`<tr><td>${x.s.replace('USDT','')}</td><td>${fmt(x.p)}</td><td class="green">${x.c>=0?'+':''}${x.c.toFixed(2)}%</td><td>${fv(x.v)}</td></tr>`).join('');
    document.getElementById('losers').innerHTML=l.map(x=>`<tr><td>${x.s.replace('USDT','')}</td><td>${fmt(x.p)}</td><td class="${x.c>=0?'green':'red'}">${x.c>=0?'+':''}${x.c.toFixed(2)}%</td><td>${fv(x.v)}</td></tr>`).join('');
    const ch=f.map(x=>x.c);
    document.getElementById('maxgain').textContent=Math.max(...ch).toFixed(2)+'%';
    document.getElementById('maxloss').textContent=Math.min(...ch).toFixed(2)+'%';
    document.getElementById('avg').textContent=(ch.reduce((a,b)=>a+b)/ch.length).toFixed(2)+'%';
  }

  document.getElementById('top').addEventListener('input',render);
  document.getElementById('minvol').addEventListener('input',render);
  load();
  </script>
</body>
</html>
